<!DOCTYPE html>  
<html lang="en">  
<head>
 <!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RYXLFC2ER8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-RYXLFC2ER8');
  
</script>
 

<meta charset="UTF-8">    
<meta name="viewport" content="width=device-width, initial-scale=1.0">    
<title>Zompamod.com ‚Äì Unlimited Features</title>    
 <link rel="canonical" id="canonicalLink">
<meta name="robots" content="index, follow">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">    
  
<style>  
:root{  
  --bg:#0f0704;  
  --card:#1a0c06;  
  --accent:#ff8b2c;  
  --accent2:#ffb45c;  
  --gold:#ffd58a;  
  --border:#3d1f12;  
}  
body{  
  background:radial-gradient(circle at top,#2a1409 0%,#120905 45%,#080403 100%);  
  margin:0;  
  font-family:Inter,Arial;  
  color:#fff;  
}  
  
*{box-sizing:border-box}  
  
/* ===== HEADER ===== */  
header{  
  padding:16px 22px;  
  display:flex;  
  align-items:center;  
  gap:12px;  
  border-bottom:1px solid var(--border);  
}  
header img{width:36px}  
header span{font-weight:800;font-size:20px}  
  
/* ===== HERO ===== */  
.hero{  
  padding:28px 22px;  
  display:grid;  
  gap:20px;  
}  

.hero h1{font-size:28px;margin:0}  
.rating{color:var(--gold);font-weight:600}  
.hero p{color:#e7c8a2;font-size:15px}  
  
/* ===== DOWNLOAD BOX ===== */  
.download-box{  
  background:linear-gradient(180deg,#2a1409,#140a05);  
  border-radius:24px;  
  padding:22px;  
  margin:22px;  
  border:1px solid var(--border);  
  box-shadow:0 10px 40px rgba(0,0,0,.6), inset 0 0 25px rgba(255,138,42,.06);  
  animation:softFloat 6s ease-in-out infinite;  
}  
  
.download-box button{  
  width:100%;  
  padding:16px;  
  border:none;  
  border-radius:18px;  
  background:linear-gradient(90deg,var(--accent),var(--accent2));  
  color:#1b0f09;  
  font-size:20px;  
  font-weight:800;  
  cursor:pointer;  
  animation:pulseGlow 2.2s infinite;  
  transition:transform 0.2s ease;  
  margin-bottom:12px; /* ŸÖÿ≥ÿßŸÅÿ© ÿ®ŸäŸÜ ÿßŸÑÿ£ÿ≤ÿ±ÿßÿ± */  
  display:flex;  
  align-items:center;  
  justify-content:center;  
  flex-direction: row-reverse;  
}  
  
.download-box button img{  
  width:20px;  
  height:20px;  
  margin-left:8px;  
  vertical-align:middle;  
}  
  
.download-box button:hover{  
  transform:scale(1.05);  
}  
  
/* ===== FAKE PROGRESS ===== */  
#fakeLoader{margin-top:16px;display:none}  
#fakeBar{  
  width:100%;  
  height:14px;  
  background:#080403;  
  border-radius:10px;  
  overflow:hidden;  
  border:1px solid var(--border)  
}  
#fakeProgress{  
  height:100%;  
  width:0%;  
  background:linear-gradient(90deg,var(--accent),var(--gold));  
}  
#fakeText,#fakeMeta{  
  margin-top:6px;  
  font-size:14px;  
  color:#e7c8a2;  
  text-align:center  
}  
  
/* ===== FEATURES ===== */  
.features{padding:22px;display:grid;gap:14px}  
.feature{  
  background:linear-gradient(180deg,#221108,#120805);  
  padding:14px 16px;  
  border-radius:14px;  
  font-size:14px;  
  border:1px solid var(--border)  
}  
  
/* ===== FOOTER ===== */  
footer{padding:20px;text-align:center;color:#c4a27a;font-size:13px}  
  
/* ===== POPUP ===== */  
#overlay{  
  position:fixed;  
  inset:0;  
  background:rgba(0,0,0,.85);  
  display:none;  
  justify-content:center;  
  align-items:center;  
  z-index:9999  
}  
#popup {
  position: relative;        /* ŸÖŸáŸÖ ÿ¨ÿØÿßŸã */
  background: linear-gradient(180deg,#2a1409,#140a05);
  width: 92%;
  max-width: 420px;
  border-radius: 22px;
  padding: 24px;
  text-align: center;
  border: 1px solid var(--border);
  animation: popupIn .35s ease-out;
  z-index: 999;              /* ŸÅŸàŸÇ overlay */
}
#popup p{font-size:14px;color:#e7c8a2;line-height:1.6}  
  


  
#popup button{  
  margin-top:12px;  
  background:#b91c1c;  
  border:none;  
  padding:10px 14px;  
  color:#fff;  
  border-radius:12px;  
  cursor:pointer  
}  
  
.popup-status{margin-top:14px;font-weight:700;display:none}  
.popup-status.checking{color:var(--gold)}  
.popup-status.success{color:#22c55e}  
.popup-status.error{color:#ef4444}  
  
.toast-notice{  
  position:fixed;  
  bottom:26px;  
  left:50%;  
  transform:translateX(-50%);  
  background:#3a1f12;  
  color:#fff;  
  padding:14px 18px;  
  border-radius:14px;  
  font-weight:800;  
  font-size:14px;  
  display:none;  
  z-index:10000  
}  
  
/* ===== ANIMATIONS ===== */  
@keyframes pulseGlow{  
  0%{box-shadow:0 0 18px rgba(255,138,42,.4)}  
  50%{box-shadow:0 0 38px rgba(255,138,42,.75)}  
  100%{box-shadow:0 0 18px rgba(255,138,42,.4)}  
}  
@keyframes float{  
  0%,100%{transform:translateY(0)}  
  50%{transform:translateY(-10px)}  
}  
@keyframes softFloat{  
  0%,100%{transform:translateY(0)}  
  50%{transform:translateY(-6px)}  
}  
@keyframes popupIn{  
  from{opacity:0;transform:scale(.92)}  
  to{opacity:1;transform:scale(1)}  
}  
  
/* ===== PERFORMANCE BOOST ===== */  
*{  
  -webkit-tap-highlight-color: transparent;  
}  
taskrendering:auto;backface-visibility:hidden}  
button{will-change:transform,box-shadow}  
.hero img,.download-box,.feature{transform:translateZ(0);}  
  
.popup-lock{
  width:76px !important;
  height:76px !important;
  display:block;
  margin:0 auto 14px;
  object-fit:contain;
  max-width:76px;
  max-height:76px;
  border-radius:18px;
}
    
/* ===== SECURE CHECK FLOW ===== */  
#secureOverlay{  
  position:fixed;  
  inset:0;  
  background:rgba(0,0,0,.55);  
  backdrop-filter:blur(6px);  
  display:none;  
  justify-content:center;  
  align-items:center;  
  z-index:9998;  
}  
  
.secureBox{  
  background:linear-gradient(180deg,#2a1409,#140a05);  
  border:1px solid var(--border);  
  border-radius:22px;  
  padding:26px 24px;  
  width:92%;  
  max-width:380px;  
  text-align:center;  
  animation:popupIn .45s ease-out;  
}  
  
.secure-lock{  
  width:70px;  
  margin-bottom:14px;  
}  
  
.secure-step{  
  font-size:14px;  
  color:#e7c8a2;  
  margin-top:8px;  
  opacity:0;  
  transition:opacity .6s ease;  
}  
  
.secure-step.active{  
  opacity:1;  
}  
  
.secure-progress{  
  height:10px;  
  background:#080403;  
  border-radius:10px;  
  margin-top:16px;  
  overflow:hidden;  
  border:1px solid var(--border);  
}  
  
.secure-bar{  
  height:100%;  
  width:0%;  
  background:linear-gradient(90deg,var(--accent),var(--gold));  
  transition:width 1.4s ease;  
}  
  
.secure-spinner {  
  animation: spin 1s linear infinite;  
  color: var(--accent); /* Ÿáÿ∞ÿß ŸäŸÑŸàŸÜ ÿßŸÑÿ£ŸäŸÇŸàŸÜÿ© */  
}  
@keyframes spin {  
  to { transform: rotate(360deg); }  
  }  
    
    
   header{
  padding:16px 22px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  border-bottom:1px solid var(--border);
}

.header-left{
  display:flex;
  align-items:center;
  gap:12px;
}

.header-left img{
  width:36px;
}

.header-left span{
  font-weight:800;
  font-size:20px;
}

/* ÿ≤ÿ± ÿßŸÑÿ±ÿ¨Ÿàÿπ ÿßŸÑÿßÿ≠ÿ™ÿ±ÿßŸÅŸä */
.back-btn{
  width:42px;
  height:42px;
  border-radius:14px;
  border:1px solid rgba(255,180,90,.35);
  background:linear-gradient(180deg,#231107,#120805);
  color:var(--gold);
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  transition:
    transform .2s ease,
    box-shadow .2s ease,
    background .2s ease;
}

.back-btn:hover{
  background:linear-gradient(180deg,#2f170b,#1a0c06);
  box-shadow:
    0 0 0 1px rgba(255,180,90,.4),
    0 0 30px rgba(255,180,90,.35);
  transform:translateX(-2px);
}

.back-btn:active{
  transform:scale(.95);
}
 .spinner{
  width:16px;
  height:16px;
  border:3px solid rgba(255,213,138,.3);
  border-top-color: var(--gold);
  border-radius:50%;
  display:inline-block;
  margin-right:8px;
  vertical-align:middle;
  animation: spin 0.8s linear infinite;
 }
 /* ===== GAME IMAGE FIX (NO FLICKER / NO STRETCH) ===== */
.game-cover{
  width:100%;
  margin:0 auto;
  border-radius:26px;
  overflow:hidden;
  background:#000;
  box-shadow:
    0 20px 50px rgba(0,0,0,.6),
    inset 0 0 0 1px rgba(255,255,255,.04);
}

.game-cover img.hero-image{
  width:100%;
  height:auto;          /* üî• Ÿáÿ∞ÿß ÿßŸÑÿ≥ÿ± */
  display:block;
  border-radius:26px;
  opacity:0;
  transition:opacity .25s ease;
}

 #verifyVideo{
  width:100%;
  border-radius:14px;
  margin:12px 0;
  background:#000;
 }


 #verifyVideo{
  display: none;
 }

 /* ===== INSTALLATION GUIDE (EXACT UI) ===== */
.install-guide-box{
  margin:26px 6px;   /* ‚¨ÖÔ∏è ÿ£Ÿàÿ≥ÿπ ŸÇŸÑŸäŸÑŸãÿß ŸÖŸÜ ÿßŸÑÿ≥ÿßÿ®ŸÇ */
  padding:26px;
  border-radius:28px;
  background:linear-gradient(180deg,#2a1409,#140a05);
  border:1px solid var(--border);
  box-shadow:
    0 18px 50px rgba(0,0,0,.7),
    inset 0 0 30px rgba(255,138,42,.07);
}

.install-title{
  text-align:center;
  font-size:26px;
  font-weight:800;
  margin-bottom:18px;
  color:var(--accent2);
}

/* Switch buttons */
.install-switch{
  background:#0b0503;
  border-radius:20px;
  padding:6px;
  display:flex;
  gap:6px;
  border:1px solid var(--border);
  margin-bottom:18px;
}

.install-tab{
  flex:1;
  text-align:center;
  padding:14px 0;
  border-radius:16px;
  font-weight:700;
  font-size:16px;
  color:#cbb08c;
  cursor:pointer;
  transition:.25s ease;
}

.install-tab.active{
  background:linear-gradient(90deg,var(--accent),var(--accent2));
  color:#1b0f09;
}

/* Steps */
.install-steps{
  display:none;
}

.install-steps.active{
  display:block;
}

.step{
  background:linear-gradient(180deg,#221108,#120805);
  border:1px solid var(--border);
  border-radius:16px;
  padding:14px 16px 14px 40px;
  font-size:14px;
  color:#e7c8a2;
  margin-bottom:10px;
  position:relative;
}

.step::before{
  content:"‚ûú";
  position:absolute;
  left:16px;
  top:14px;
  font-weight:800;
  color:var(--accent2);
   }
/* ÿ≤ÿ± ÿ•ÿ∫ŸÑÿßŸÇ popup */
.popup-close {
  position: absolute;
  top: 12px;
  right: 12px;

  width: 40px;
  height: 40px;

  background: rgba(32, 20, 11, 1); /* ŸÜŸÅÿ≥ ÿßŸÑÿÆŸÑŸÅŸäÿ© ÿßŸÑÿØÿßŸÉŸÜÿ© */
  
  border: 1px solid rgba(255, 214, 153, 0.28); /* ŸÜŸÅÿ≥ ÿßŸÑÿ•ÿ∑ÿßÿ± ÿßŸÑÿ±ŸÅŸäÿπ EXACT */
  border-radius: 16px;  /* ŸÜŸÅÿ≥ ÿßŸÑÿßŸÜÿ≠ŸÜÿßÿ° ÿßŸÑŸÖŸàÿ¨ŸàÿØ ÿ®ÿßŸÑÿµŸàÿ±ÿ© */

  display: flex;
  align-items: center;
  justify-content: center;

  color: #f5d7a0; /* ŸÜŸÅÿ≥ ÿßŸÑŸÑŸàŸÜ ÿßŸÑÿ∞Ÿáÿ®Ÿä */
  font-size: 26px; /* X ÿµÿ∫Ÿäÿ±ÿ© ŸÜŸÅÿ≥ ÿ≠ÿ¨ŸÖ ÿßŸÑÿ≥ŸáŸÖ */
  font-weight: 500;

  cursor: pointer;
  transition: 0.2s ease-out;
}

.popup-close:hover {
  background: rgba(40, 25, 14, 1);
  transform: scale(1.05);
}

.popup-close:active {
  transform: scale(0.92);
}

  
</style>  
</head>  
  
<body>  
  
<header>
  <div class="header-left">
    <img src="https://i.imgur.com/x5uKfGJ.png">
    <span>zompamod</span>
  </div>

  <button class="back-btn" onclick="goHome()" aria-label="Back">
    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
      <path d="M15 18l-6-6 6-6"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"/>
    </svg>
  </button>
</header>
<section class="hero">    
  <div class="game-cover">
  <img class="hero-image" alt="Game Image">
</div>    
  <h1 class="hero-title"></h1>    
  <div id="gameRating" class="rating"></div>
  <p id="gameDescription"></p>    

<div class="download-box">    
  <button id="downloadBtn">  
    <img src="https://i.imgur.com/0CDI4Yq.png" alt="Android">  
    Download APK  
  </button>    

  <button id="downloadBtn2">  
    <img src="https://i.imgur.com/OvpX7m5.png" alt="iOS">  
    Download  
  </button>    
  
  <div id="fakeLoader">    
    <div id="fakeBar"><div id="fakeProgress"></div></div>    
    <div id="fakeText">Preparing Fille‚Ä¶</div>    
    <div id="fakeMeta">0 MB / 154.27 MB ‚Ä¢ 0 MB/s</div>    
  </div>    
</div>    
  
<section class="features">    
<div class="feature">‚úî Unlimited Features Enabled</div>    
<div class="feature">‚úî No Root Required</div>    
<div class="feature">‚úî Latest Version</div>    
<div class="feature">‚úî Fast & Secure Download</div>  
</section>    

 <section class="install-guide-box">
  <h2 class="install-title">Installation Guide</h2>

  <div class="install-switch">
    <div class="install-tab active" data-target="install-android">Android</div>
    <div class="install-tab" data-target="install-ios">iOS</div>
  </div>

  <!-- ANDROID GUIDE -->
  <div id="install-android" class="install-steps active">
    <div class="step">Download the APK file using the Android download button above</div>
    <div class="step">Go to Settings &gt; Security &gt; Enable "Unknown Sources"</div>
    <div class="step">Locate the downloaded APK file in your file manager</div>
    <div class="step">Tap to install and follow on-screen instructions</div>
    <div class="step">After installation, download additional game cache files</div>
    <div class="step">Place cache files in Android/obb/ folder</div>
    <div class="step">Launch the game and enjoy!</div>
  </div>

  <!-- IOS GUIDE -->
  <div id="install-ios" class="install-steps">
    <div class="step">Download the IPA file using the iOS download button</div>
    <div class="step">Install AltStore on your computer (Windows/Mac required)</div>
    <div class="step">Connect your iOS device and open AltStore</div>
    <div class="step">Select "Install .ipa" and choose the downloaded file</div>
    <div class="step">Enter your Apple ID when prompted</div>
    <div class="step">Trust the developer in Settings &gt; General &gt; Device Management</div>
    <div class="step">Launch the game and download additional resources</div>
  </div>
 </section>
  
  <!-- Security Flow -->  
<div id="secureOverlay">  
  <div class="secureBox">  
    <svg class="secure-spinner" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="50" height="50">  
  <path fill="none" stroke="currentColor" stroke-width="2" d="M12 15.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7zm7.94-2a7.98 7.98 0 0 0 0-2l2.07-1.6-2-3.46-2.45 1a7.968 7.968 0 0 0-1.73-1L15 2h-6l-.73 2.44a7.968 7.968 0 0 0-1.73 1l-2.45-1-2 3.46 2.07 1.6a7.98 7.98 0 0 0 0 2L2.16 14l2 3.46 2.45-1a7.968 7.968 0 0 0 1.73 1L9 22h6l.73-2.44a7.968 7.968 0 0 0 1.73-1l2.45 1 2-3.46-2.07-1.6z"/>  
</svg>  
  
      
  
    <h3>Final Security Check</h3>  
  
    <div id="step1" class="secure-step">‚úî File integrity verified</div>  
    <div id="step2" class="secure-step">‚úî Malware & virus scan completed</div>  
    <div id="step3" class="secure-step">‚úî Download server authenticated</div>  
    <div id="step4" class="secure-step">‚ö† Human verification required</div>  
  
    <div class="secure-progress">  
      <div id="secureBar" class="secure-bar"></div>  
    </div>  
  </div>  
  </div>  
    
    
    
  
<footer>¬© 2026 zompamod.com ‚Äî All rights reserved</footer>    
  
<div id="overlay">    
<div id="popup">
 <div class="popup-close" onclick="closePopup()">√ó</div>
 
  
  <!-- Logo ÿßŸÑŸÇŸÅŸÑ -->  
  <img id="popupGameIcon" class="popup-lock" alt="Game Icon">
<h2>Human Verification</h2>    
<p>  
complete this simple step to confirme you are not a Robot.<br><br>  
1: Just complete one quick task from the list below.<br>  
2: after finished, Return here and your game will download automatically.
</p>  

 <!-- üé• VERIFY VIDEO -->
<video
  id="verifyVideo"
  muted
  autoplay
  playsinline
  loop
  preload="metadata"
  style="width:100%;max-width:400px;border-radius:12px;"
>
  <source src="/assets/verify.mp4" type="video/mp4">
</video>

 <div id="offersBox" style="margin-top:18px;display:flex;flex-direction:column;gap:14px;">
  <!-- Offers will load here -->
 </div>
  
<div id="popupChecking" class="popup-status checking">
  <span class="spinner"></span>
  Waiting for v√©rification...
</div>
<div id="popupError" class="popup-status error">The verification was not completed successfully, please Try again.</div>    
<div id="popupSuccess" class="popup-status success">‚úÖ Verification completed successfully.<br>Download will start shortly‚Ä¶</div>    
  
  
<div id="closeNotice" class="toast-notice">  
Please complete the verification process and the download will be completed automatically‚ö†Ô∏è.  
</div>  


<script src="games.js"></script>
<script>
if (!location.search.includes("game=")) {
  location.replace("index.html");
}
</script>
<script>
/* =============================
   GET GAME FROM URL
============================= */


const params = new URLSearchParams(window.location.search);
const gameId = params.get("game");
 function key(name) {
  return name + "_" + gameId;
 }
/* =============================
   GOOGLE ANALYTICS ‚Äì VIEW GAME
============================= */
if (typeof gtag === "function" && gameId) {
  gtag("event", "view_game", {
    game_id: gameId,
    page_location: location.href
  });
}
const game = GAMES.find(g => g.id === gameId);

if (!game) {
  document.body.innerHTML = "<h2 style='text-align:center'>Game not found</h2>";
  throw new Error("Game not found");
}

/* =============================
   SEO (TITLE & DESCRIPTION)
============================= */
document.title = game.title + " Mod APK Latest Version | Modnext";

let metaDesc = document.querySelector("meta[name='description']");
if (!metaDesc) {
  metaDesc = document.createElement("meta");
  metaDesc.name = "description";
  document.head.appendChild(metaDesc);
}
metaDesc.content = game.description;



/* =============================
   DOM ELEMENTS
============================= */
const secureOverlay = document.getElementById("secureOverlay");
const secureBar = document.getElementById("secureBar");

const step1 = document.getElementById("step1");
const step2 = document.getElementById("step2");
const step3 = document.getElementById("step3");
const step4 = document.getElementById("step4");

const downloadBtn = document.getElementById("downloadBtn");
const downloadBtn2 = document.getElementById("downloadBtn2");

const fakeLoader = document.getElementById("fakeLoader");
const fakeProgress = document.getElementById("fakeProgress");
const fakeText = document.getElementById("fakeText");
const fakeMeta = document.getElementById("fakeMeta");

const overlay = document.getElementById("overlay");
const popupChecking = document.getElementById("popupChecking");
const popupError = document.getElementById("popupError");
const popupSuccess = document.getElementById("popupSuccess");



const closeNotice = document.getElementById("closeNotice");

/* üîî ÿ•ÿ¥ÿπÿßÿ± ÿßŸÑÿ±ÿ¨Ÿàÿπ ÿ®ÿØŸàŸÜ ÿ•ŸÉŸÖÿßŸÑ ÿßŸÑÿ™ÿ≠ŸÇŸÇ */
window.addEventListener("pageshow", () => {
  const wentOffer = localStorage.getItem(key("went_offer"));
  const subid = localStorage.getItem(key("subid"));
  const verifyClicked = localStorage.getItem(key("verify_clicked")) === "1";

  if (!wentOffer || !subid || !verifyClicked) return;

  overlay.style.display = "flex";
  showChecking();
  loadAdBlueOffers();
  tryStartVerifyPolling();
});
/* =============================
   CONFIG
============================= */
const WORKER = "https://long-term-6789.yoursnagh.workers.dev";
const OFFER = "https://price-low.eu/a/OY9r6H2BVWck0wE";
const OFFER_ID = "smartlink_1";
const SUBID_TTL = 86400000;

let FINAL = "";
let timer = null;
let verifyInterval = null;
let subid = null;
let loadedMB = 0;

const totalMB = 154.27;
const SPEED_MBPS = 8.9;

/* =============================
   HELPERS
============================= */
function cleanURL(url) {
  const u = new URL(url);
  ["fbclid","gclid","ttclid","utm_source","utm_campaign"].forEach(p => {
    u.searchParams.delete(p);
  });
  return u.toString();
}

function createSubid() {
  subid = "rbx_" + Math.random().toString(36).slice(2, 10);
  localStorage.setItem(key("subid"), subid);

  localStorage.setItem(key("subid_payload"), JSON.stringify({
    id: subid,
    offer: "adbluemedia",
    time: Date.now()
  }));
}



 function tryStartVerifyPolling() {
  const verifyClicked = localStorage.getItem(key("verify_clicked")) === "1";
  const sid = localStorage.getItem(key("subid"));

  if (!verifyClicked || !sid) return;
  if (verifyInterval) return;

  startVerifyPolling();
}
  

function isSubidExpired() {
  const raw = localStorage.getItem(key("subid_payload"));
  if (!raw) return true;
  try {
    const d = JSON.parse(raw);
    return (Date.now() - d.time) > SUBID_TTL;
  } catch {
    return true;
  }
}

/* =============================
   DOWNLOAD FLOW
============================= */
function resetDownloader() {
  clearInterval(timer);
  clearInterval(verifyInterval);
  fakeLoader.style.display = "none";
  fakeProgress.style.width = "0%";
  fakeText.textContent = "Preparing file‚Ä¶";
  fakeMeta.textContent = `0 MB / ${totalMB} MB ‚Ä¢ 0 MB/s`;
  loadedMB = 0;
  downloadBtn.disabled = false;
  downloadBtn2.disabled = false;
}
function getDynamicSpeed(progressPercent) {
  let base = getNetworkBaseSpeed();

  // ÿ™ÿ∞ÿ®ÿ∞ÿ® Ÿàÿßÿ∂ÿ≠
  base += (Math.random() - 0.5) * 3; // ‚¨ÖÔ∏è ÿ£ŸÉÿ®ÿ±

  // ÿ™ÿ®ÿßÿ∑ÿ§ ÿ∑ÿ®ŸäÿπŸä ŸÇÿ±ÿ® ÿßŸÑŸÜŸáÿßŸäÿ©
  if (progressPercent > 80) base *= 0.7;
  if (progressPercent > 92) base *= 0.45;

  return Math.max(1.1, base);
}

function getNetworkBaseSpeed() {
  const conn = navigator.connection || {};
  let base;

  switch (conn.effectiveType) {
    case "slow-2g":
    case "2g":
      base = 1.5;
      break;
    case "3g":
      base = 3.5;
      break;
    case "4g":
    default:
      base = 7.5;
  }

  // ŸÅÿ±ŸÇ ÿ®ÿ≥Ÿäÿ∑ ÿ≠ÿ≥ÿ® ÿßŸÑÿ¨Ÿáÿßÿ≤
  const device = localStorage.getItem("device");
  if (device === "android") base *= 1.15;
  if (device === "ios") base *= 0.9;

  return base;
}
 
function startFakeDownload() {
  resetDownloader();
  resetSecureFlow();
  

  fakeLoader.style.display = "block";
  downloadBtn.disabled = true;
  downloadBtn2.disabled = true;

  timer = setInterval(() => {
    const percent = (loadedMB / totalMB) * 100;
const speed = getDynamicSpeed(percent);

loadedMB = Math.min(totalMB, loadedMB + speed);

fakeProgress.style.width = (loadedMB / totalMB * 100) + "%";
fakeMeta.textContent =
  `${loadedMB.toFixed(1)} MB / ${totalMB} MB ‚Ä¢ ${speed.toFixed(1)} MB/s`;
    if (loadedMB >= totalMB) {
      clearInterval(timer);
      showSecureFlow();
    }
  }, 500);
}

/* =============================
   VERIFY
============================= */
function getFinalLink() {
  const device = localStorage.getItem("device");
  if (!device || !game) return null;

  // ÿßŸÑÿ≠ÿßŸÑÿ© ÿßŸÑŸÖŸàÿµŸâ ÿ®Ÿáÿß: links {}
  if (game.links && game.links[device]) {
    return game.links[device];
  }

  // ÿ≠ÿßŸÑÿßÿ™ ÿßÿ≠ÿ™Ÿäÿßÿ∑Ÿäÿ©
  if (device === "android") {
    return (
      game.android ||
      game.link_android ||
      game.final_android ||
      game.apk ||
      null
    );
  }

  if (device === "ios") {
    return (
      game.ios ||
      game.link_ios ||
      game.final_ios ||
      game.ipa ||
      null
    );
  }

  return null;
}

function showChecking() {
  popupChecking.style.display = "block";
  popupError.style.display = "none";
  popupSuccess.style.display = "none";

  const video = document.getElementById("verifyVideo");
  if (video) {
    video.currentTime = 0;
    video.play().catch(() => {});
  }
}

function showError() {
  popupChecking.style.display = "none";
  popupSuccess.style.display = "none";
  popupError.style.display = "block"; // ‚úÖ
 }

function showSuccess() {
  popupChecking.style.display = "none";
  popupSuccess.style.display = "block";
}


 
 function startVerifyPolling() {
  // ŸÖŸÜÿπ ÿßŸÑÿ™ŸÉÿ±ÿßÿ±
  if (verifyInterval) return;

  const sid = localStorage.getItem(key("subid"));
  if (!sid) return;

  showChecking(); // ŸÖÿ±ÿ© Ÿàÿßÿ≠ÿØÿ© ŸÅŸÇÿ∑

  verifyInterval = setInterval(async () => {
    try {
      const subid = localStorage.getItem(key("subid"));
      if (!subid) return;

      const res = await fetch(WORKER + "/verify?subid=" + subid, {
        cache: "no-store"
      });

      if (!res.ok) return;

      const status = (await res.text()).trim();

      /* ========= SUCCESS ========= */
      if (status === "verified") {
        clearInterval(verifyInterval);
        verifyInterval = null;

        showSuccess();

        const finalLink = getFinalLink(); // ÿ≠ÿ≥ÿ® ÿßŸÑÿ¨Ÿáÿßÿ≤

        if (!finalLink) {
          alert("Download link not available for this device");
          return;
        }

       // üìä GA4 ‚Äì download_success (ŸÖÿ∂ŸÖŸàŸÜ)
      if (typeof gtag === "function") {
        gtag("event", "download_success", {
  game_id: gameId,
  device: localStorage.getItem("device"),
  event_callback: () => {
    setTimeout(() => {
      window.location.href = finalLink;
    }, 500);
  }
});
      } else {
        // ÿßÿ≠ÿ™Ÿäÿßÿ∑ ŸÅŸä ÿ≠ÿßŸÑ GA ÿ∫Ÿäÿ± ÿ¨ÿßŸáÿ≤
        window.location.href = finalLink;
 }

        // ÿ™ŸÜÿ∏ŸäŸÅ ÿßŸÑŸÇŸäŸÖ
        localStorage.removeItem(key("verify_clicked"));
localStorage.removeItem(key("subid"));
localStorage.removeItem(key("subid_payload"));
localStorage.removeItem(key("went_offer"));

        

        return;
      }

      /* ========= FAILED ========= */
      if (localStorage.getItem(key("went_offer")) === "1") {
        clearInterval(verifyInterval);
        verifyInterval = null;

        showError();
      }

    } catch (err) {
      console.error("verify polling error:", err);
    }
  }, 2000);
}
      //===============
   
function resetSecureFlow() {
  [step1, step2, step3, step4].forEach(s => s.classList.remove("active"));
  secureBar.style.width = "0%";
}

function showSecureFlow() {
secureOverlay.style.display = "flex";
  const steps = [
    { el: step1, bar: 25, delay: 1500 },
    { el: step2, bar: 50, delay: 1000 },
    { el: step3, bar: 75, delay: 4000 },
    { el: step4, bar: 100, delay: 2000 }
  ];

  let i = 0;
  function run() {
    if (i >= steps.length) {
      secureOverlay.style.display = "none";
overlay.style.display = "flex";

// ‚úÖ ÿ£ÿ∏Ÿáÿ± checking ŸÅŸàÿ±Ÿãÿß
showChecking();
loadAdBlueOffers(); 

// ‚è≥ ÿßŸÜÿ™ÿ∏ÿ± ŸÇŸÑŸäŸÑŸãÿß ŸÑÿ∂ŸÖÿßŸÜ Ÿàÿ¨ŸàÿØ subid
tryStartVerifyPolling();
      return;
    }
    steps[i].el.classList.add("active");
    secureBar.style.width = steps[i].bar + "%";
    setTimeout(() => { i++; run(); }, steps[i].delay);
  }
  run();
}

/* =============================
   BUTTONS
============================= */
downloadBtn.onclick = () => {
  localStorage.setItem("device", "android");

  if (typeof gtag === "function") {
    gtag("event", "download_click", {
      game_id: gameId,
      device: "android"
    });
  }

  startFakeDownload();
};

downloadBtn2.onclick = () => {
  localStorage.setItem("device", "ios");

  if (typeof gtag === "function") {
    gtag("event", "download_click", {
      game_id: gameId,
      device: "ios"
    });
  }

  startFakeDownload();
};

/* =============================
   PROTECTION
============================= */
["contextmenu","dragstart","selectstart"].forEach(e =>
  document.addEventListener(e, ev => {
    if (ev.target.tagName === "IMG") ev.preventDefault();
  })
);
   

 function closePopup() {
  clearInterval(verifyInterval);
  clearInterval(timer);

  localStorage.removeItem(key("subid"));
localStorage.removeItem(key("subid_payload"));
localStorage.removeItem(key("went_offer"));
localStorage.removeItem(key("verify_clicked"));
  localStorage.removeItem("device");

  overlay.style.display = "none";
  popupChecking.style.display = "none";
  popupError.style.display = "none";
  popupSuccess.style.display = "none";

  

  resetDownloader();

  // üîî ÿ•ÿ¥ÿπÿßÿ± ÿßŸÑÿ•ŸÑÿ∫ÿßÿ°
  closeNotice.style.display = "block";
  setTimeout(() => {
    closeNotice.style.display = "none";
  }, 4000);
}

 function goHome(){
  location.href = "index.html";
}
 // üîÅ ÿ∂ŸÖÿßŸÜ ÿ®ÿØÿ° ÿßŸÑÿ™ÿ≠ŸÇŸÇ ÿØÿßÿ¶ŸÖŸãÿß ÿπŸÜÿØ ÿßŸÑÿ±ÿ¨Ÿàÿπ ŸÑŸÑÿµŸÅÿ≠ÿ©
document.addEventListener("visibilitychange", () => {
  if (!document.hidden) {
    tryStartVerifyPolling();
  }
});




   

  document.addEventListener("DOMContentLoaded", () => {

  /* ===== VALIDATION ===== */
  if (!game) return;

  /* ===== TITLE ===== */
  const titleEl = document.querySelector(".hero-title");
  if (titleEl) {
    titleEl.textContent = game.title;
  }

  /* ===== IMAGE (NO FLICKER) ===== */
  const imgEl = document.querySelector(".hero-image");
  if (imgEl && game.image) {
    const img = new Image();
    img.src = game.image;

    img.onload = () => {
      imgEl.src = game.image;
      imgEl.style.opacity = "1";
    };
  }

  /* ===== RATING ===== */
  const ratingEl = document.getElementById("gameRating");
  if (ratingEl) {
    ratingEl.textContent = game.rating || "";
  }
   /* ===== POPUP ICON ===== */
  const popupIcon = document.getElementById("popupGameIcon");
  if (popupIcon && game && game.image) {
      popupIcon.src = game.image;
  }

  /* ===== DESCRIPTION ===== */
  const descEl = document.getElementById("gameDescription");
  if (descEl) {
    descEl.textContent = game.description || "";
  }

});
</script>
<script>
document.querySelectorAll(".install-tab").forEach(tab=>{
  tab.addEventListener("click",()=>{
    document.querySelectorAll(".install-tab").forEach(t=>t.classList.remove("active"));
    document.querySelectorAll(".install-steps").forEach(s=>s.classList.remove("active"));

    tab.classList.add("active");
    document.getElementById(tab.dataset.target).classList.add("active");
  });
});
  

async function loadAdBlueOffers() {
  const url =
    "https://young-grass-5f62.yoursnagh.workers.dev?user_id=1&api_key=A9F3K7M2QX8R5LZC4W1E6T0YHDUJBNPVSI";

  try {
    const res = await fetch(url);
    const data = await res.json();

    const offersBox = document.getElementById("offersBox");
    offersBox.innerHTML = "";

    /* ===== ÿßŸÑÿ•ÿ∑ÿßÿ± ÿßŸÑÿÆÿßÿ±ÿ¨Ÿä ÿ®ŸÑŸàŸÜ ÿßŸÑŸÄ POPUP ===== */
    const frame = document.createElement("div");
    frame.style.cssText = `
      width: 100%;
      margin: -5px auto 0 auto;
      padding: 20px 12px 6px 12px;

      background: linear-gradient(180deg,#2a1409,#140a05);  /* ‚¨Ö ŸÑŸàŸÜ popup */
      border-radius: 26px;
      border: 1px solid rgba(255,200,120,0.25);

      position: relative;
      display: flex;
      flex-direction: column;
      
    `;

    /* ===== ÿßŸÑÿπŸÜŸàÿßŸÜ ŸÅŸä ÿßŸÑÿ£ÿπŸÑŸâ ===== */
    const title = document.createElement("div");
    title.innerText = "Task List";
    title.style.cssText = `
      position: absolute;
      top: -12px;
      left: 50%;
      transform: translateX(-50%);

      padding: 4px 16px;
      background: linear-gradient(180deg,#2a1409,#140a05);
      border: 1px solid rgba(255,200,120,0.35);
      border-radius: 12px;

      font-size: 12px;
      font-weight: 900;
      color: white;
    `;
    frame.appendChild(title);

    /* ===== ÿßŸÑÿπÿ±Ÿàÿ∂ ŸÅŸÇÿ∑ ÿ®ŸÑŸàŸÜ ÿ∞Ÿáÿ®Ÿä ===== */
    (data.offers || []).slice(0, 2).forEach((offer) => {
      const item = document.createElement("div");

      item.style.cssText = `
        width: 100%;
        display: flex;
        align-items: center;
        gap: 12px;

        padding: 10px 12px;
        border-radius: 16px;
        margin-bottom: 8px; 

        background: linear-gradient(90deg,#ff8b2c,#ffb45c); /* ‚¨Ö ÿßŸÑŸÑŸàŸÜ ÿßŸÑÿ∞Ÿáÿ®Ÿä */
        border: 1px solid rgba(255,200,120,0.45);

        cursor: pointer;
        transition: .2s ease;
      `;

      item.onmouseenter = () => item.style.transform = "scale(1.02)";
      item.onmouseleave = () => item.style.transform = "scale(1)";

      item.innerHTML = `
        <img src="${offer.network_icon || offer.icon}"
             style="
               width:40px;
               height:40px;
               border-radius:10px;
               border:1px solid rgba(255,200,120,0.45);
               background:#fff;
               padding:3px;
               object-fit:cover;
             ">

        <div style="
              color:#1b0f09;
              font-size:13px;
              font-weight:800;
              line-height:16px;
             ">
          ${offer.anchor || offer.name}
        </div>
      `;

      item.onclick = () => openOffer(offer);
      frame.appendChild(item);
    });

    offersBox.appendChild(frame);

  } catch (err) {
    console.error("Offer Load Error:", err);
    offersBox.innerHTML =
      "<p style='color:red;text-align:center'>Failed to load offers.</p>";
  }
}
        
      
    
  
  function openOffer(offer) {


  // ÿ•ŸÜÿ¥ÿßÿ° subid
  createSubid();

  // ÿ™ÿÆÿ≤ŸäŸÜ ÿ≠ÿßŸÑÿ© ÿßŸÑÿ™ÿ≠ŸÇŸÇ
  localStorage.setItem(key("verify_clicked"), "1");
  localStorage.setItem(key("went_offer"), "1");

  // ŸÅÿ™ÿ≠ ÿ±ÿßÿ®ÿ∑ ÿßŸÑÿπÿ±ÿ∂ + subid
  const sid = localStorage.getItem(key("subid"));
  const finalUrl = offer.url + "&subid=" + sid;
  window.open(finalUrl, "_blank");

  // ÿ•ÿ∏Ÿáÿßÿ± ÿ≠ÿßŸÑÿ© checking
  popupChecking.style.display = "block";

  // ÿ®ÿØÿ° ÿßŸÑÿ™ÿ≠ŸÇŸÇ (polling)
  tryStartVerifyPolling();
}
  document.addEventListener("DOMContentLoaded", () => {
    // ÿ™ÿ¥ÿ∫ŸäŸÑ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿπÿ±Ÿàÿ∂ ÿØÿßÿ¶ŸÖÿßŸã ÿ®ÿπÿØ ŸÅÿ™ÿ≠ popup
    const offersObserver = new MutationObserver(() => {
        if (overlay.style.display === "flex") {
            loadAdBlueOffers();
        }
    });

    offersObserver.observe(overlay, { attributes: true, attributeFilter: ["style"] });
});
 </script>
